<p align="center">
  <img alt="avtocod" src="https://hsto.org/webt/r_/m4/yf/r_m4yf2iybb85maogtsj5vzxxes.png" width="128" />
</p>

# Тестовое задание для PHP-разработчика

## Как начать выполнение тестового задания?

Для выполнения задания лучше всего использовать данный репозиторий как шаблон, для чего просто перейдите по [**этой ссылке**][use_this_repo_template].

Данный репозиторий уже содержит `Dockerfile`, `docker-compose.yml` и `Makefile` для быстрого запуска приложения силами `docker` _(нет необходимости устанавливать php, postgres и пр. локально)_. Всё, что необходимо - это установленные локально `docker` и `docker-compose`. После клонирования репозитория просто выполните `make install && make up` - и можно приступать к написанию полезного кода. Команда `make up` "запускает приложение" на определенном TCP порту (ссылка на него будет выведена в терминале).

Приложение запускается при выполнении следующих команд:

```bash
$ git clone ... && cd $_
$ make install
$ make migrate
$ make shell
```

## Описание необходимого функционала

Необходимо написать сервис который умеет парсить JSON и XML строку, содержащую марки и VIN-коды автомобилей. <br/><br/>
Сервис должен сохранять прочитанные из строки марки и VIN-коды автомобилей в таблицу `cars` в БД.

Реализовывать API-роуты или чтение файла для получения сырой строки **не нужно**. Необходимо реализовать Command `string:parse {--raw_data}` в котором `raw_data` - это сырая строка в одном из указанных ниже форматов.

Сервис должен реализовывать следующий метод:
```
public function handle(string $raw_data): bool
{
}
```

## Форматы строк:

Json строка (только такой формат):
```json
{
    "data": {
        "cars": [
            {
                "vin": "random_vin",
                "mark": "random_mark"
            }
        ]
    }
}
```

Xml строка (только такой формат):
```xml
<?xml version="1.0" encoding="UTF-8"?>
<data>
    <cars>
        <car>
            <vin>random_vin</vin>
            <mark>random_mark</mark>
        </car>
    </cars>
</data>
```

При неизвестном формате или невалидных даных метод должен выбросить Exception.
Сервис должен быть покрыт Unit-тестами.
Совет: не нужно оверинжинирига. Мы придерживаемся YAGNI и KISS принципов

## Требования к используемым технологиям

Задание должно быть:

- Выполнено с использованием PHP фреймворка `Laravel` версии не ниже `8.*`;
- БД - `PostgreSQL`;

## Требования к реализации

- Разрешено использовать любые сторонние composer-пакеты;
- Все реализуемые методы должны иметь корректный phpdoc-комментарий (описание на русском языке, `@params`, `@return`);
- Не следует излишне усложнять решение реализацией DDD или абстракциями ради абстракций - об этих вещах мы подискутируем на собеседовании;
- База данных должна создаваться с помощью миграций (никаких sql-файлов);
- **Для всего реализованного функционала должны быть написаны Unit-тесты** (`phpunit`);

## Плюсами будут являться

- Текст коммитов - на английском языке;
- Форматирование исходного кода с помощью `php-cs-fixer`.
- Успешное прохождение проверок статического анализатора `phpstan`.

## Результат выполнения

Ссылку на репозиторий с вашей реализацией необходимо отправить нашему HR или TeamLead, от которого вы получили ссылку на данный репозиторий.

Приложение должно проходить все тесты:

```bash
$ make test
```
